= OpenShift Observability Workshop

A comprehensive 4-hour hands-on workshop teaching observability on Red Hat OpenShift, covering metrics, logging, distributed tracing, and OpenTelemetry.

== Workshop Overview

This workshop guides developers through implementing production-ready observability for applications running on OpenShift 4.21.

**Modules**:

* **Module 1**: User Workload Monitoring (Prometheus, ServiceMonitor, alerts)
* **Module 2**: Logging with LokiStack (centralized logging, LogQL)
* **Module 3**: Distributed Tracing (Tempo, Jaeger, trace analysis)
* **Module 4**: OpenTelemetry Integration (unified instrumentation, collector)

**Prerequisites**:

* OpenShift 4.21+ cluster with cluster-admin access
* OpenShift GitOps (ArgoCD) for bootstrap deployment
* Basic understanding of Kubernetes and containers

== Deployment on RHDP

=== Deploy with Showroom Deployer (Recommended)

This workshop is designed to be deployed on Red Hat Demo Platform (RHDP) using showroom-deployer.

**Prerequisites**:

* RHDP cluster access
* AgnosticV catalog item configured (see AgnosticV setup below)

**Deployment steps**:

. Fork or clone this repository to your GitHub account

. Create your AgnosticV catalog item pointing to this repository

. Deploy using showroom-deployer:
+
[source,bash]
----
# From your AgnosticV workload or catalog configuration
showroom_git_repo: https://github.com/<your-org>/observability-workshop.git
showroom_ref: main
----

. The showroom-deployer will:
+
* Clone the repository
* Build the Antora site
* Deploy the Showroom interface
* Provide the workshop URL

**Documentation**: link:https://github.com/rhpds/showroom-deployer[showroom-deployer on GitHub^]

=== Deploy Observability Stack

After the workshop interface is deployed, you need to deploy the observability infrastructure:

. Apply the ArgoCD ApplicationSet to deploy all observability components:
+
[source,bash]
----
oc apply -f bootstrap/argocd/applicationset-observability.yaml
----

. Monitor deployment:
+
[source,bash]
----
oc get applications -n openshift-gitops
----

. Verify all components are ready:
+
[source,bash]
----
# User Workload Monitoring
oc get pods -n openshift-user-workload-monitoring

# Logging
oc get pods -n openshift-logging

# Tempo
oc get pods -n openshift-tempo-operator

# OpenTelemetry
oc get pods -n openshift-opentelemetry-operator
----

See link:bootstrap/README.md[bootstrap/README.md] for detailed deployment instructions and customization options.

== Local Development

For developing and testing workshop content locally before deploying to RHDP:

=== Using Make Targets (Quick Start)

The easiest way to build and run the complete development environment with both the showroom site and user-info-api:

[source,bash]
----
# Build both containers (site + API)
make dev-build

# Run in a pod (multi-container environment)
make dev-run

# Stop the development environment
make dev-stop

# View logs
podman logs -f showroom-dev-pod-site  # Site logs
podman logs -f showroom-dev-pod-api   # API logs
----

**What this does**:

* Builds the showroom-site Antora container
* Builds the user-info-api sidecar container
* Creates a podman pod with both containers sharing localhost network
* Exposes the site at http://localhost:8080
* API endpoint at http://localhost:8080/api/user-info
* Uses sample user data from `.config/users-dev.yaml`

This provides a complete local development environment matching the deployed multi-user setup.

=== Using Containers (Recommended)

In order to test and develop on your local machine, you can use a specially built container with Podman or Docker as follows.

. Create a git repo from this template
.. Suggested naming: `showroom_<lab-name>`
. Clone your new repo and `cd` into it
. When you make changes to the content, all you need is to kill the container and run it again.
+
[source,sh]
----
podman run --rm --name antora -v $PWD:/antora -p 8080:8080 -i -t ghcr.io/juliaaano/antora-viewer
----

For SELinux environments, `:z` may need to be appended to the volume mount:

----
podman run --rm --name antora -v $PWD:/antora:z -p 8080:8080 -i -t ghcr.io/juliaaano/antora-viewer
----

Live-reload is not supported.

=== Using Local Files (Less Recommended)

. Create a git repo from this template
. Clone the repo and `cd` into it
. Run ./utilities/lab-serve
. Open http://localhost:8080 in your browser
. Run ./utilities/lab-build to build your html

To rebuild your html, run `./utilites/build`.

== Using Podman Compose (live reload supported)

. Run `podman-compose up --build` to start the container
. Open http://localhost:8080 in your browser
. Live reload is supported, edit the content and refresh the page to see the changes

== Editing Files

Now you are ready to go!
You can start editing the files in the `content/modules/ROOT/pages/` directory.

Many modern editors such as Visual Studio Code offer live Asciidoc Preview extensions.

=== Workshop Content Structure

[source,sh]
----
./content/modules/ROOT/
├── assets
│   └── images                                    # Images for your content
├── pages                                         # Workshop content
│   ├── index.adoc                                # Learner landing page
│   ├── 01-overview.adoc                          # Business scenario & objectives
│   ├── 02-details.adoc                           # Technical requirements
│   ├── 03-module-01-user-workload-monitoring.adoc
│   ├── 04-module-02-logging-lokistack.adoc
│   ├── 05-module-03-distributed-tracing.adoc
│   └── 06-module-04-opentelemetry.adoc
└── nav.adoc                                      # Navigation structure

./bootstrap/
├── argocd
│   └── applicationset-observability.yaml         # ArgoCD ApplicationSet
├── helm                                          # Helm charts for components
│   ├── user-workload-monitoring/
│   ├── logging-operator/
│   ├── tempo-operator/
│   └── opentelemetry-operator/
└── README.md                                     # Bootstrap deployment guide
----

=== Module Structure

Each module follows this structure:

* **Learning objectives**: 5 clear, measurable outcomes
* **Concept explanation**: Theory and architecture
* **5 hands-on exercises**: Progressive skill building
* **Verification checkpoints**: Confirm success after each exercise
* **Troubleshooting guidance**: 4-5 common issues and solutions
* **Learning outcomes**: Recap of skills gained

=== Workshop Technologies

**Observability Components**:

* Monitoring Stack for Red Hat OpenShift 4.21 (Prometheus, Thanos, Alertmanager)
* OpenShift Logging 6.2 (LokiStack, LogQL)
* Tempo Operator 2.3 (distributed tracing)
* Red Hat build of OpenTelemetry 0.x

**Deployment Tools**:

* OpenShift GitOps (ArgoCD)
* Helm charts for configuration
* OpenShift 4.21+

== Reference Materials

**Official Documentation**:

* link:https://docs.redhat.com/en/documentation/monitoring_stack_for_red_hat_openshift/4.21[Monitoring Stack for Red Hat OpenShift^]
* link:https://docs.redhat.com/en/documentation/openshift_container_platform/4.21/html/logging/[OpenShift Logging^]
* link:https://docs.redhat.com/en/documentation/openshift_container_platform/4.21/html/red_hat_build_of_opentelemetry/[Red Hat build of OpenTelemetry^]
* link:https://docs.openshift.com/container-platform/4.21/otel/[Distributed Tracing Documentation^]

**Workshop Story**:

The workshop follows **Red Hat Observability Inc.**, a fictional company implementing comprehensive observability to reduce mean time to resolution from 2-4 hours to 15-30 minutes.

== Contributing

To contribute improvements or report issues:

1. Fork this repository
2. Create a feature branch
3. Make your changes
4. Test locally using the container method
5. Submit a pull request

== License

This workshop content follows Red Hat's standard licensing for training materials.

[source,sh]
----
./content/modules/ROOT/
├── assets
│   └── images                       # Images used in your content
│       └── example-image.png
├── examples                         # You can add downloadable assets here
│   └── example-bash-script.sh       # e.g. an example bash script
├── nav.adoc                         # Navigation for your lab
├── pages                            # Your content goes here
│   ├── index.adoc                   # First page of your lab, e.g. overview etc
│   ├── module-01.adoc
│   └── module-02.adoc               # Sample lab has 2 modules including index.adoc
└── partials                         # You can add partials here, reusable content inserted inline into your modules
    └── example_partial.adoc
----

== Adding Additional Links

You can add links to external content in the convenient "Links" drop-down on the upper-right of the Showroom Summit 2024 UI.

../content/antora.yml
[source,yaml]
----
asciidoc:
  attributes:
    page-links:
    - url: https://redhat.com
      text: Red Hat
----

image::ui-links.png[]

== Dev Mode

As a convenience to developers, the Dev Mode Extention (disabled by default) displays the asciidoc attributes you have to work with while writing your lab instructions.

. Disable/Enable Dev Mode by changing `enabled: true` or `enabled: false`
+
.default-site.yml
[source,yaml]
----
extensions:
  - id: dev-mode
    require: ./content/lib/dev-mode.js
    enabled: false
----

. Produces
+
image::dev-mode.png[]

== Using Claude Skills for Content Generation

This repository includes Claude skills to help you create professional Red Hat workshop and demo content.

=== Option 1: Using Cursor IDE (Recommended for Teams)

If you have Cursor with Claude access:

. Clone this repository and open in Cursor
. Open Cursor chat (Cmd+L or Ctrl+L)
. Say simple commands:
.. `create lab` - Create workshop modules
.. `create demo` - Create demo content
.. `verify content` - Verify content quality
.. `generate agv description` - Generate AgnosticV catalog descriptions

For detailed Cursor setup, see `CURSOR-SKILLS-README.adoc`.

=== Option 2: Using Claude Code CLI

If you have Claude Code CLI installed:

. Clone this repository and start a Claude Code session within the directory
. Run `/skills` to list available skills
. Run a skill by name: `/create-lab`, `/create-demo`, `/verify-content`, or `/generate-agv-description`

For detailed documentation on using Claude skills, see `CLAUDE-SKILLS-GUIDE.adoc`.
