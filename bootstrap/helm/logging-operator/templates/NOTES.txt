‚úÖ OpenShift Logging with LokiStack deployed successfully!

‚ö†Ô∏è  NOTE: This chart is for Workshop Module 2 - Educational purposes

üìã Components installed:
  - Cluster Logging Operator in namespace: {{ .Values.operator.namespace }}
  - Loki Operator in namespace: {{ .Values.lokiOperator.namespace }}
{{- if .Values.lokiStack.enabled }}
  - LokiStack: {{ .Values.lokiStack.name }} (size: {{ .Values.lokiStack.size }})
{{- end }}
{{- if .Values.clusterLogging.enabled }}
  - ClusterLogging: {{ .Values.clusterLogging.name }} (log collector: Vector)
{{- end }}

üîç Verification commands:

1. Check operator installation:
   oc get csv -n {{ .Values.operator.namespace }} | grep cluster-logging

{{- if .Values.lokiStack.enabled }}
2. Check LokiStack status:
   oc get lokistack {{ .Values.lokiStack.name }} -n {{ .Values.lokiStack.namespace }}

3. Check LokiStack components:
   oc get pods -n {{ .Values.lokiStack.namespace }} -l app.kubernetes.io/component=compactor
   oc get pods -n {{ .Values.lokiStack.namespace }} -l app.kubernetes.io/component=distributor
   oc get pods -n {{ .Values.lokiStack.namespace }} -l app.kubernetes.io/component=ingester
   oc get pods -n {{ .Values.lokiStack.namespace }} -l app.kubernetes.io/component=querier
   oc get pods -n {{ .Values.lokiStack.namespace }} -l app.kubernetes.io/component=query-frontend
{{- end }}

{{- if .Values.clusterLogging.enabled }}
4. Check ClusterLogging status:
   oc get clusterlogging {{ .Values.clusterLogging.name }} -n {{ .Values.clusterLogging.namespace }}

5. Check log collector (Vector) pods:
   oc get pods -n {{ .Values.clusterLogging.namespace }} -l app.kubernetes.io/component=collector
{{- end }}

üìä Access logs via OpenShift Console:

1. Navigate to: Observe ‚Üí Logs
2. Select namespace and view application/infrastructure logs
3. Use LogQL queries to filter and search logs

Example LogQL queries:
  - All logs: {kubernetes_namespace_name="observability-demo"}
  - Errors only: {kubernetes_namespace_name="observability-demo"} |= "error"
  - Specific pod: {kubernetes_pod_name="go-api-xxx"}

{{- if .Values.lokiStack.enabled }}

‚ö†Ô∏è  Storage Configuration:
{{- if eq .Values.lokiStack.s3.type "odf" }}

ODF ObjectBucketClaim created:
  - OBC: {{ .Values.lokiStack.s3.odf.bucketName }}
  - Namespace: {{ .Values.lokiStack.namespace }}

Create a LokiStack S3 secret with keys:
  access_key_id, access_key_secret, bucketnames, endpoint
using the OBC Secret/ConfigMap values, then set it in the LokiStack spec.
Secret name:
  {{ default (printf "%s-s3" .Values.lokiStack.name) .Values.lokiStack.s3.secretName }}
{{- else if eq .Values.lokiStack.s3.type "external" }}

External S3 secret:
  - Secret: {{ default (printf "%s-s3" .Values.lokiStack.name) .Values.lokiStack.s3.secretName }}
  - Namespace: {{ .Values.lokiStack.namespace }}
{{- else if eq .Values.lokiStack.s3.type "pvc" }}

PersistentVolumeClaims:
  - Storage class: {{ .Values.lokiStack.storageClassName }}
  - Size per component: {{ .Values.lokiStack.storage.size }}
{{- end }}
{{- end }}

üí° Workshop Module 2 Activities:

1. Deploy an application and generate logs
2. Query logs using LogQL in OpenShift Console
3. Create log-based alerts
4. Configure log retention policies
5. Export logs to external systems

üìö Documentation: https://docs.openshift.com/container-platform/latest/observability/logging/cluster-logging.html
