âœ… OpenTelemetry Operator and central collector deployed successfully!

ğŸ“‹ Components installed:
  - OpenTelemetry Operator in namespace: {{ .Values.operator.namespace }}
  - Central Collector: {{ .Values.centralCollector.name }} ({{ .Values.centralCollector.replicas }} replicas) in {{ .Values.namespace }}
  - Service Accounts: {{ .Values.serviceAccounts.sidecar }}, {{ .Values.serviceAccounts.central }}
{{- if .Values.centralCollector.spanmetrics.enabled }}
  - Spanmetrics Connector: Enabled (generates RED metrics from traces)
{{- end }}

NOTE: The sidecar OpenTelemetryCollector CR and the Instrumentation CR are NOT deployed
by this chart. Workshop students create them in their own namespaces as exercises.

ğŸ” Verification commands:

1. Check operator installation:
   oc get csv -n {{ .Values.operator.namespace }} | grep opentelemetry-product

2. Check central collector:
   oc get opentelemetrycollector {{ .Values.centralCollector.name }} -n {{ .Values.namespace }}

3. Check central collector pods:
   oc get pods -n {{ .Values.namespace }} -l app.kubernetes.io/name={{ .Values.centralCollector.name }}-collector

{{- if .Values.centralCollector.spanmetrics.enabled }}

ğŸ“Š Query RED metrics generated from traces:

1. Request Rate:
   sum by (service_name) (rate(traces_spanmetrics_calls_total[5m]))

2. Error Rate:
   sum by (service_name) (rate(traces_spanmetrics_calls_total{http_status_code=~"5.."}[5m]))

3. Latency (P95):
   histogram_quantile(0.95, sum by (service_name, le) (rate(traces_spanmetrics_latency_bucket[5m])))

{{- end }}

ğŸ’¡ Architecture:

  Application pods (per-user namespace)
      â†“ OTLP (localhost:4318, via sidecar -- created by students)
  Sidecar Collector (per-user, enriches with K8s metadata)
      â†“ OTLP gRPC
  Central Collector ({{ .Values.centralCollector.replicas }} replicas, {{ .Values.namespace }})
      â”œâ”€â†’ Tempo (traces, X-Scope-OrgID: {{ .Values.centralCollector.tempo.tenant }})
{{- if .Values.centralCollector.spanmetrics.enabled }}
      â”œâ”€â†’ Spanmetrics Connector (RED metrics)
{{- end }}
      â””â”€â†’ Prometheus (metrics)

ğŸ“š Documentation: https://docs.openshift.com/container-platform/latest/observability/otel/otel-installing.html
