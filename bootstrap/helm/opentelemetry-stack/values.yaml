# OpenTelemetry Operator Configuration
operator:
  # Namespace where the OpenTelemetry operator will be installed
  namespace: openshift-operators
  # Operator channel (stable, tech-preview)
  channel: stable
  # Install plan approval (Automatic or Manual)
  installPlanApproval: Automatic
  # Source catalog
  source: redhat-operators
  # Source namespace
  sourceNamespace: openshift-marketplace

# Namespace for OpenTelemetry resources
namespace: observability-demo

# Service Accounts
serviceAccounts:
  sidecar: otel-collector-sidecar
  central: otel-central-collector

# Central Collector Configuration
centralCollector:
  # Name of the OpenTelemetryCollector CR
  name: central-collector
  # Number of replicas
  replicas: 2
  
  # Memory limiter configuration (MiB)
  memoryLimit: 1800
  
  # Tempo configuration
  tempo:
    # Tempo distributor endpoint
    endpoint: tempo-tempo-distributor.openshift-tempo-operator.svc:4317
    # Tenant ID for X-Scope-OrgID header
    tenant: dev
    # TLS CA file path
    caFile: /var/run/secrets/kubernetes.io/serviceaccount/service-ca.crt
  
  # Prometheus remote write configuration
  prometheus:
    # Prometheus endpoint
    endpoint: http://observability-stack-prometheus.observability-demo.svc:9090/api/v1/write

  # LokiStack log forwarding configuration
  loki:
    # LokiStack gateway OTLP/HTTP endpoint (openshift-logging tenants mode)
    endpoint: https://logging-loki-gateway-http.openshift-logging.svc.cluster.local:8080/api/logs/v1/application/otlp
    # TLS CA file path
    caFile: /var/run/secrets/kubernetes.io/serviceaccount/service-ca.crt
  
  # Spanmetrics connector configuration
  spanmetrics:
    # Enable spanmetrics connector for RED metrics generation
    enabled: true
    # Histogram buckets for latency metrics
    histogramBuckets:
      - 2ms
      - 8ms
      - 50ms
      - 100ms
      - 200ms
      - 500ms
      - 1s
      - 5s
      - 10s
    # Dimensions to extract from spans
    # Note: span.name is a built-in dimension and must NOT be listed here
    dimensions:
      - name: http.method
      - name: http.status_code
    # Enable exemplars for trace-metric correlation
    exemplarsEnabled: true
    # Metrics flush interval
    flushInterval: 30s
